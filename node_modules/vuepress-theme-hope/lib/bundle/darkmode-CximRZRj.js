import{usePreferredDark as n,useStorage as c}from"@vueuse/core";import{inject as v,computed as s,watchEffect as g,onMounted as k,watch as h}from"vue";import{a as f}from"./useThemeData-BOFgq9MR.js";const d=Symbol(__VUEPRESS_DEV__?"darkMode":""),i=()=>{const e=v(d);if(!e)throw new Error("useDarkmode() is called without provider.");return e},p=e=>{const u=f(),t=n(),o=s(()=>u.value.darkmode??"switch"),r=c("vuepress-theme-hope-scheme","auto"),l=s(()=>{const a=o.value;return a==="disable"?!1:a==="enable"?!0:a==="auto"?t.value:a==="toggle"?r.value==="dark":r.value==="dark"||r.value==="auto"&&t.value}),m=s(()=>{const a=o.value;return a==="switch"||a==="toggle"});e.provide(d,{canToggle:m,config:o,isDarkmode:l,status:r}),Object.defineProperties(e.config.globalProperties,{$isDarkmode:{get:()=>l.value}})},D=()=>{const{config:e,isDarkmode:u,status:t}=i();g(()=>{e.value==="disable"?t.value="light":e.value==="enable"?t.value="dark":e.value==="toggle"&&t.value==="auto"&&(t.value="light")}),k(()=>{h(u,o=>{document.documentElement.setAttribute("data-theme",o?"dark":"light")},{immediate:!0})})};export{p as i,D as s,i as u};
//# sourceMappingURL=darkmode-CximRZRj.js.map
