import{startsWith as h,isLinkAbsolute as k,isLinkHttp as w}from"@vuepress/helper/client";import{watchImmediate as g}from"@vueuse/core";import{h as o,defineComponent as y,ref as L,computed as C,onMounted as x,TransitionGroup as I}from"vue";import{useRouter as b,useRoutePath as H}from"vuepress/client";import"./styles/notice.css";const p=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"close-icon",viewBox:"0 0 1024 1024",fill:"currentColor","aria-label":"close icon"},o("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));p.displayName="CloseIcon";const M=y({name:"Notice",props:{config:{type:Array,required:!0}},setup(v){const m=b(),a=H(),l=L(!1),e=C(()=>{const t=v.config.find(s=>"match"in s?new RegExp(s.match).test(a.value):h(a.value,s.path));if(!t)return null;const{noticeKey:n,actions:c=[],title:r="",content:u="",...d}=t;return{...d,actions:c,title:r,content:u,key:n?`notice-${n}`:`notice:${r}${u}`}}),i=()=>{l.value=!1,e.value&&(e.value.showOnce?localStorage:sessionStorage).setItem(e.value.key,"true")},f=t=>{t&&(k(t)?m.push(t):w(t)&&window.open(t)),i()};return x(()=>{g(e,()=>{if(e.value){const t=(e.value.showOnce?localStorage:sessionStorage).getItem(e.value.key);l.value=!t}})}),()=>o(I,{name:"notice-fade"},()=>e.value&&l.value?[e.value.fullscreen?o("div",{key:"mask",class:"vp-notice-mask",onClick:()=>{e.value.confirm||i()}}):null,o("div",{key:"popup",class:["vp-notice-wrapper",{fullscreen:e.value.fullscreen}]},[o("header",{class:"vp-notice-title"},[e.value.confirm?null:o(p,{onClick:i}),o("span",{innerHTML:e.value.title})]),o("div",{class:"vp-notice-content",innerHTML:e.value.content}),o("div",{class:"vp-notice-footer"},e.value.actions.map(({text:t,link:n,type:c=""})=>o("button",{type:"button",class:["vp-notice-footer-action",c],onClick:()=>{f(n)},innerHTML:t})))])]:[])}});export{M as N};
//# sourceMappingURL=Notice-DbMxSR-5.js.map
