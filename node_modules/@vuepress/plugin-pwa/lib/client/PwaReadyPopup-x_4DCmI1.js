import{useLocaleConfig as r}from"@vuepress/helper/client";import{defineComponent as i,shallowRef as d,computed as c,onMounted as m,h as a,Transition as f}from"vue";import{U as v}from"./icons-DQk7h1-3.js";import"./styles/popup.css";import{u as w}from"./usePwaEvent-CUDY9qle.js";const u=o=>{const t=o.waiting;if(!t)return;const s=new MessageChannel;t.postMessage({type:"SKIP_WAITING"},[s.port2])},P=i({name:"PwaReadyPopup",props:{locales:{type:Object,required:!0}},slots:Object,setup(o,{slots:t}){const s=r(o.locales),e=d(),n=c(()=>!!e.value),p=()=>{e.value&&(u(e.value),e.value=void 0)};return m(()=>{w().on("updated",l=>{e.value=l})}),()=>a(f,{name:"popup"},()=>t.default?.({isReady:n.value,reload:p})??(n.value?a("button",{type:"button",class:"sw-update-popup",tabindex:0,onClick:()=>{p()}},[s.value.update,a("span",{class:"icon-wrapper"},a(v))]):null))}});export{P,u as s};
//# sourceMappingURL=PwaReadyPopup-x_4DCmI1.js.map
