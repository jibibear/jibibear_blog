import{redirectMap as k}from"@temp/redirect/map.js";import{entries as M,isLinkHttp as S}from"@vuepress/helper/client";import{usePreferredLanguages as $,watchImmediate as x}from"@vueuse/core";import{computed as C,onMounted as D}from"vue";import{useRoute as E,useRouter as d,useRouteLocale as v,useRoutePath as I}from"vuepress/client";import{u as j,s as R}from"./useRedirectInfo-Bi8syic3.js";const y=/#.*$/u,z=(o,l=!1)=>(l?o.replace(y,""):o).replace(/\/(?:README\.md)?$/i,"/index.html").replace(/(?:\.(?:md|html))?$/,".html"),A=({autoLocale:o,config:l,defaultBehavior:r,defaultLocale:s,localeFallback:h})=>{const L=Object.entries(l),g=$(),e=E(),p=d(),P=v(),w=C(()=>P.value==="/"),b=()=>{const c=p.getRoutes(),u=s&&c.some(({path:a})=>a===e.path.replace("/",s))?s:c.find(({path:a})=>e.path.split("/").length>=3&&a===e.path.replace(/^\/[^/]+\//,"/"))?.path;let t=null;e:for(const a of g.value)for(const[i,m]of L)if(m.includes(a)){if(h&&c.every(({path:f})=>f!==e.path.replace("/",f)))continue;t=i;break e}const n=u?e.fullPath.replace("/",u):null;if(t){const a=c.some(({path:f})=>e.path.replace("/",t)===f),i=e.fullPath.replace("/",t),m=a?i:r==="homepage"?t:r==="defaultLocale"&&n?n:i;p.replace(m)}else n?p.replace(n):e.path!=="/404.html"&&p.replace("/404.html")};x(()=>e.path,c=>{for(const[u,t]of M(k))if(z(c.toLowerCase())===u.toLowerCase()){S(t)?window.open(t):p.replace(t);return}o&&w.value&&b()})},B=o=>{const l=j(o),r=v(),s=I(),h=d();D(()=>{l.value&&!R.value[r.value]&&(h.replace(s.value.replace(r.value,l.value.localePath)),R.value[r.value]=!0)})};export{B as a,A as s};
//# sourceMappingURL=setupRedirect-DT585Je6.js.map
