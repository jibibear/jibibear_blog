import{isString as p,LoadingIcon as f,wait as v}from"@vuepress/helper/client";import{watchImmediate as k}from"@vueuse/core";import{defineComponent as c,ref as g,shallowRef as w,computed as y,onMounted as h,watch as u,onUnmounted as C,h as r,nextTick as D}from"vue";import{usePageData as M,useSiteData as A}from"vuepress/client";import"artalk/dist/Artalk.css";import{u as B}from"../index-QRWp8FXN.js";var S=c({name:"ArtalkComment",props:{identifier:{type:String,required:!0},darkmode:Boolean},setup(a){const t=B(),i=M(),l=A(),n=g(!1),d=w();let e=null;const s=y(()=>p(t.value.server)),m=async()=>{const[{default:o}]=await Promise.all([import("artalk/dist/Artalk.mjs"),v(t.value.delay??800)]);n.value=!0,await D(),e=o.init({useBackendConf:!1,site:l.value.title,pageTitle:i.value.title,...t.value,el:d.value,pageKey:a.identifier,darkMode:a.darkmode}),t.value.useBackendConf&&e.on("mounted",()=>{e.setDarkMode(a.darkmode)})};return h(()=>{k(()=>t.value,()=>{e?.destroy(),m()}),u(()=>a.identifier,()=>{e?.update({site:l.value.title,pageTitle:i.value.title,pageKey:a.identifier}),e?.reload()},{flush:"post"}),u(()=>a.darkmode,o=>{e?.setDarkMode(o)},{flush:"post"})}),C(()=>{e?.destroy()}),()=>s.value?r("div",{class:"artalk-wrapper"},[n.value?null:r(f),r("div",{ref:d})]):null}});export{S as default};
//# sourceMappingURL=ArtalkComment.js.map
