import{usePageData as j,useRouteLocale as P,useSiteLocaleData as R,defineClientConfig as F}from"vuepress/client";import{startsWith as Y,useLocaleConfig as f,checkIsMacOS as G,checkIsIOS as W,checkIsiPad as q}from"@vuepress/helper/client";import{useSupported as z,watchImmediate as A,useEventListener as I,useDebounceFn as B,useScrollLock as V,onClickOutside as $}from"@vueuse/core";import{ref as c,provide as Q,computed as k,watch as T,onMounted as b,onUnmounted as L,defineComponent as S,inject as O,h as l,shallowRef as K,nextTick as X,defineAsyncComponent as J}from"vue";import{h as x,u as D,c as Z,l as y,o as N,i as ee}from"./index-CEuotdLU.js";import{c as U,C as ae,S as le}from"./icons-DxmX1gti.js";import"./styles/search-box.css";import"./styles/search-modal.css";import"vuepress/shared";const w=Symbol(__VUEPRESS_DEV__?"search-pro":""),se=()=>{const e=c(!1);Q(w,e)},te=(e,o=!1)=>{const t=c(0),u=k(()=>e.value[t.value]),a=()=>{t.value=t.value>0?t.value-1:e.value.length-1},i=()=>{t.value=t.value<e.value.length-1?t.value+1:0};return T(e,()=>{o||(t.value=0)}),{index:t,item:u,prev:a,next:i}},oe=()=>{const e=z(()=>typeof window<"u"&&"userAgent"in window.navigator);return k(()=>e.value&&/\b(?:Android|iPhone)/i.test(navigator.userAgent))},ne=e=>e instanceof Element?document.activeElement===e&&(["TEXTAREA","SELECT","INPUT"].includes(e.tagName)||e.hasAttribute("contenteditable")):!1,re=e=>x.some(o=>{const{key:t,ctrl:u=!1,shift:a=!1,alt:i=!1,meta:h=!1}=o;return t===e.key&&u===e.ctrlKey&&a===e.shiftKey&&i===e.altKey&&h===e.metaKey}),ie=e=>{const o=c([]);if(__SLIMSEARCH_SUGGESTION__){const t=D(),u=j(),a=P();b(()=>{const{suggest:i,terminate:h}=Z(),v=n=>{const{resultsFilter:d,querySplitter:_,suggestionsFilter:C=r=>r,...m}=t.value;n?i(n,a.value,m).then(r=>C(r,n,a.value,u.value)).then(r=>{o.value=r.length?Y(r[0],n)&&!r[0].slice(n.length).includes(" ")?r:[n,...r]:[]}).catch(r=>{console.error(r)}):o.value=[]};A([e,a],([n])=>{v(n.join(" "))}),L(()=>{h()})})}return{enabled:__SLIMSEARCH_SUGGESTION__,suggestions:o}},ue='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',ce='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',ve='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',he='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',E=x[0];var pe=S({name:"SearchBox",setup(){const e=f(y),o=O(w),t=c(!1),u=k(()=>E?[...(t.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((a,i)=>E[["ctrl","shift","alt","meta"][i]]),E.key.toUpperCase()]:null);return I("keydown",a=>{!o.value&&re(a)&&!ne(a.target)&&(a.preventDefault(),o.value=!0)}),b(()=>{const{userAgent:a}=navigator;t.value=G(a)||W(a)||q(a)}),()=>[l("button",{type:"button",class:"slimsearch-button","aria-label":e.value.search,onClick:()=>{o.value=!0}},[l(U),l("div",{class:"slimsearch-placeholder"},e.value.search),u.value?l("div",{class:"slimsearch-key-hints"},u.value.map(a=>l("kbd",{class:"slimsearch-key"},a))):null])]}}),de=S({name:"SearchKeyHints",setup(){const e=f(y),o=oe();return()=>o.value?null:l("div",{class:"slimsearch-hints"},[l("span",{class:"slimsearch-hint"},[l("kbd",{innerHTML:ue}),e.value.select]),l("span",{class:"slimsearch-hint"},[l("kbd",{innerHTML:ve}),l("kbd",{innerHTML:ce}),e.value.navigate]),l("span",{class:"slimsearch-hint"},[l("kbd",{innerHTML:he}),e.value.exit])])}});const me=J({loader:()=>import("./components/SearchResult.js"),loadingComponent:()=>{const e=f(y);return l(le,{class:"slimsearch-result-wrapper",hint:e.value.loading})}}),ge=["ArrowDown","ArrowUp","Escape","Tab","Enter"];var fe=S({name:"SearchModal",setup(){const e=O(w),o=R(),t=f(y),u=D(),a=c(""),i=c([]),{enabled:h,suggestions:v}=ie(i),n=c(!1),{index:d,prev:_,next:C}=te(v),m=K(),r=K(),g=k(()=>h&&n.value&&v.value.length),M=(s=d.value)=>{a.value=v.value[s],n.value=!1};I("keydown",s=>{g.value?s.key==="ArrowUp"?_():s.key==="ArrowDown"?C():s.key==="Tab"?M():(s.key==="Enter"||s.key==="Escape")&&(n.value=!1):s.key==="Escape"&&(e.value=!1)});const H=B(()=>{(u.value.querySplitter?.(a.value)??Promise.resolve(a.value.split(" "))).then(s=>{i.value=s})},Math.min(N.searchDelay,N.suggestDelay));return A(a,H),b(()=>{const s=V(document.body);T(e,async p=>{s.value=p,p&&(await X(),m.value?.focus())}),$(r,()=>{n.value=!1}),L(()=>{s.value=!1})}),()=>e.value?l("div",{class:"slimsearch-modal-wrapper"},[l("div",{class:"slimsearch-mask",onClick:()=>{e.value=!1,a.value=""}}),l("div",{class:"slimsearch-modal"},[l("div",{class:"slimsearch-box"},[l("form",[l("label",{for:"search-pro","aria-label":t.value.search},l(U)),l("input",{ref:m,type:"search",class:"slimsearch-input",id:"search-pro",placeholder:t.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${o.value.title}-search`,value:a.value,"aria-controls":"slimsearch-results",onKeydown:s=>{g.value&&ge.includes(s.key)&&s.preventDefault()},onInput:({target:s})=>{a.value=s.value,n.value=!0,d.value=0}}),a.value?l("button",{type:"reset",class:"slimsearch-clear-button",innerHTML:ae,onClick:()=>{a.value=""}}):null,g.value?l("ul",{class:"slimsearch-suggestions",ref:r},v.value.map((s,p)=>l("li",{class:["slimsearch-suggestion",{active:p===d.value}],onClick:()=>{M(p)}},[l("kbd",{class:"slimsearch-auto-complete",title:`Tab ${t.value.autocomplete}`},"Tab"),s]))):null]),l("button",{type:"button",class:"slimsearch-close-button",onClick:()=>{e.value=!1,a.value=""}},t.value.cancel)]),l(me,{queries:i.value,isFocusing:!g.value,onClose:()=>{e.value=!1},onUpdateQuery:s=>{a.value=s}}),l(de)])]):null}}),ke=F({enhance({app:e}){ee(e),e.component("SearchBox",pe)},setup(){se()},rootComponents:[fe]});export{ke as default};
//# sourceMappingURL=config.js.map
