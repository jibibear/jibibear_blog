import{values as d}from"@vuepress/helper/client";import{watchImmediate as _}from"@vueuse/core";import{ref as f,isRef as p,computed as m,inject as E,readonly as g}from"vue";import{useRouteLocale as h}from"vuepress/client";import{isFunction as w}from"vuepress/shared";const v=__SLIMSEARCH_CUSTOM_FIELDS__,i=__SLIMSEARCH_OPTIONS__,y=i.hotKeys,j=__SLIMSEARCH_LOCALES__,u="Canceled because of new search request.",C=()=>{const e=new Worker(__VUEPRESS_DEV__?new URL("./worker/index.js",import.meta.url):`${__VUEPRESS_BASE__}${i.worker}`,__VUEPRESS_DEV__?{type:"module"}:{}),r={suggest:null,search:null,all:null};return e.addEventListener("message",({data:s})=>{const[o,n,l]=s,t=r[o];t?.id===n&&t.resolve(l)}),e.addEventListener("error",s=>{console.warn("Search Worker error:",s)}),{suggest:(s,o,n)=>new Promise((l,t)=>{r.suggest?.reject(new Error(u));const a=Date.now();e.postMessage({type:"suggest",id:a,query:s,locale:o,options:n}),r.suggest={id:a,resolve:l,reject:t}}),search:(s,o,n)=>new Promise((l,t)=>{r.search?.reject(new Error(u));const a=Date.now();e.postMessage({type:"search",id:a,query:s,locale:o,options:n}),r.search={id:a,resolve:l,reject:t}}),all:(s,o,n)=>new Promise((l,t)=>{r.all?.reject(new Error(u));const a=Date.now();e.postMessage({type:"all",id:a,query:s,locale:o,options:n}),r.all={id:a,resolve:l,reject:t}}),terminate:()=>{e.terminate(),d(r).forEach(s=>{s?.reject(new Error("Worker has been terminated."))})}}},L=/[\u4e00-\u9fff\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/,R=e=>e.split(/\s+/).map(r=>{if(r.length>3){const s=r.split("");if(s.every(o=>L.test(o)))return s}return r}).flat(),c=f({querySplitter:e=>Promise.resolve(R(e))}),S=Symbol(__VUEPRESS_DEV__?"slimsearch":""),P=e=>{p(e)?_(()=>e.value,r=>{c.value=r}):w(e)?_(m(e),r=>{c.value=r}):c.value=e},D=()=>{const e=h(),r=E(S);return m(()=>{const{locales:s={},...o}=r.value;return{...o,...s[e.value]}})},M=e=>{e.provide(S,g(c))};export{v as a,C as c,P as d,y as h,M as i,j as l,i as o,D as u};
//# sourceMappingURL=index-CEuotdLU.js.map
